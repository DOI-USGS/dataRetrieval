<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Imports data from NWIS web service. This function gets the data from here:
https://nwis.waterdata.usgs.gov/nwis/qwdata
A list of parameter codes can be found here:
https://nwis.waterdata.usgs.gov/nwis/pmcodes/
A list of statistic codes can be found here:
https://nwis.waterdata.usgs.gov/nwis/help/?read_file=stat&amp;amp;format=table"><title>Construct NWIS url for data retrieval — constructNWISURL • dataRetrieval</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Construct NWIS url for data retrieval — constructNWISURL"><meta property="og:description" content="Imports data from NWIS web service. This function gets the data from here:
https://nwis.waterdata.usgs.gov/nwis/qwdata
A list of parameter codes can be found here:
https://nwis.waterdata.usgs.gov/nwis/pmcodes/
A list of statistic codes can be found here:
https://nwis.waterdata.usgs.gov/nwis/help/?read_file=stat&amp;amp;format=table"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-53797708-7"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-53797708-7');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://www.usgs.gov/" class="external-link"><img src="logo.png" id="logo" alt="Home" style="padding: 0px 50px 0px 0px;"></a>
    <a class="navbar-brand me-2" href="../index.html">dataRetrieval</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.7.12</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/dataRetrieval.html">Background</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Function Help</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-large-data-pull-examples">Large Data Pull Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-large-data-pull-examples">
    <a class="dropdown-item" href="../articles/wqp_large_pull_script.html">Scripting Approach</a>
    <a class="dropdown-item" href="../articles/wqp_large_pull_targets.html">Pipeline Approach</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/tutorial.html">Tutorial</a>
    <a class="dropdown-item" href="../articles/qwdata_changes.html">Changes to QW</a>
    <a class="dropdown-item" href="../articles/movingAverages.html">Moving Averages</a>
    <a class="dropdown-item" href="../articles/statsServiceMap.html">Stat Service</a>
    <a class="dropdown-item" href="../articles/nldi.html">NLDI Interface</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USGS-R/dataRetrieval">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Construct NWIS url for data retrieval</h1>
      <small class="dont-index">Source: <a href="https://github.com/DOI-USGS/dataRetrieval/blob/HEAD/R/constructNWISURL.R" class="external-link"><code>R/constructNWISURL.R</code></a></small>
      <div class="d-none name"><code>constructNWISURL.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Imports data from NWIS web service. This function gets the data from here:
<a href="https://nwis.waterdata.usgs.gov/nwis/qwdata" class="external-link">https://nwis.waterdata.usgs.gov/nwis/qwdata</a>
A list of parameter codes can be found here:
<a href="https://nwis.waterdata.usgs.gov/nwis/pmcodes/" class="external-link">https://nwis.waterdata.usgs.gov/nwis/pmcodes/</a>
A list of statistic codes can be found here:
<a href="https://nwis.waterdata.usgs.gov/nwis/help/?read_file=stat&amp;format=table" class="external-link">https://nwis.waterdata.usgs.gov/nwis/help/?read_file=stat&amp;format=table</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">constructNWISURL</span><span class="op">(</span></span>
<span>  <span class="va">siteNumbers</span>,</span>
<span>  parameterCd <span class="op">=</span> <span class="st">"00060"</span>,</span>
<span>  startDate <span class="op">=</span> <span class="st">""</span>,</span>
<span>  endDate <span class="op">=</span> <span class="st">""</span>,</span>
<span>  <span class="va">service</span>,</span>
<span>  statCd <span class="op">=</span> <span class="st">"00003"</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"xml"</span>,</span>
<span>  expanded <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ratingType <span class="op">=</span> <span class="st">"base"</span>,</span>
<span>  statReportType <span class="op">=</span> <span class="st">"daily"</span>,</span>
<span>  statType <span class="op">=</span> <span class="st">"mean"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>siteNumbers</dt>
<dd><p>string or vector of strings USGS site number.  This is usually an 8 digit number</p></dd>


<dt>parameterCd</dt>
<dd><p>string or vector of USGS parameter code.  This is usually an 5 digit number.</p></dd>


<dt>startDate</dt>
<dd><p>character starting date for data retrieval in the form YYYY-MM-DD. Default is "" which indicates
retrieval for the earliest possible record.</p></dd>


<dt>endDate</dt>
<dd><p>character ending date for data retrieval in the form YYYY-MM-DD. Default is "" which indicates
retrieval for the latest possible record.</p></dd>


<dt>service</dt>
<dd><p>string USGS service to call. Possible values are "dv" (daily values),
"uv" (unit/instantaneous values),
"qw" (water quality data), "gwlevels" (groundwater),and "rating" (rating curve),
"peak", "meas" (discrete streamflow measurements),
"stat" (statistics web service BETA).</p></dd>


<dt>statCd</dt>
<dd><p>string or vector USGS statistic code only used for daily value service.
This is usually 5 digits.  Daily mean (00003) is the default.</p></dd>


<dt>format</dt>
<dd><p>string, can be "tsv" or "xml", and is only applicable for daily
and unit value requests.  "tsv" returns results faster, but there is a possibility
that an incomplete file is returned without warning. XML is slower,
but will offer a warning if the file was incomplete (for example, if there was a
momentary problem with the internet connection). It is possible to safely use the "tsv" option,
but the user must carefully check the results to see if the data returns matches
what is expected. The default is therefore "xml".</p></dd>


<dt>expanded</dt>
<dd><p>logical defaults to <code>TRUE</code>. If <code>TRUE</code>, retrieves additional
information, only applicable for qw data.</p></dd>


<dt>ratingType</dt>
<dd><p>can be "base", "corr", or "exsa". Only applies to rating curve data.</p></dd>


<dt>statReportType</dt>
<dd><p>character Only used for statistics service requests.  Time
division for statistics: daily, monthly, or annual.  Default is daily.
Note that daily provides statistics for each calendar day over the specified
range of water years, i.e. no more than 366 data points will be returned for
each site/parameter.  Use <code>readNWISdata</code> or <code>readNWISdv</code> for daily averages.
Also note that "annual" returns statistics for the calendar year.  Use
<code>readNWISdata</code> for water years. Monthly and yearly
provide statistics for each month and year within the range individually.</p></dd>


<dt>statType</dt>
<dd><p>character Only used for statistics service requests. Type(s)
of statistics to output for daily values.  Default is mean, which is the only
option for monthly and yearly report types. See the statistics service documentation
at <a href="https://waterservices.usgs.gov/rest/Statistics-Service.html" class="external-link">https://waterservices.usgs.gov/rest/Statistics-Service.html</a> for a
full list of codes.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>url string</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">site_id</span> <span class="op">&lt;-</span> <span class="st">"01594440"</span></span></span>
<span class="r-in"><span><span class="va">startDate</span> <span class="op">&lt;-</span> <span class="st">"1985-01-01"</span></span></span>
<span class="r-in"><span><span class="va">endDate</span> <span class="op">&lt;-</span> <span class="st">""</span></span></span>
<span class="r-in"><span><span class="va">pCode</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"00060"</span>, <span class="st">"00010"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">url_daily</span> <span class="op">&lt;-</span> <span class="fu">constructNWISURL</span><span class="op">(</span><span class="va">site_id</span>, <span class="va">pCode</span>,</span></span>
<span class="r-in"><span>  <span class="va">startDate</span>, <span class="va">endDate</span>, <span class="st">"dv"</span>,</span></span>
<span class="r-in"><span>  statCd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"00003"</span>, <span class="st">"00001"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">url_unit</span> <span class="op">&lt;-</span> <span class="fu">constructNWISURL</span><span class="op">(</span><span class="va">site_id</span>, <span class="va">pCode</span>, <span class="st">"2012-06-28"</span>, <span class="st">"2012-06-30"</span>, <span class="st">"iv"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">url_qw_single</span> <span class="op">&lt;-</span> <span class="fu">constructNWISURL</span><span class="op">(</span><span class="va">site_id</span>, <span class="st">"01075"</span>, <span class="va">startDate</span>, <span class="va">endDate</span>, <span class="st">"qw"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">url_qw</span> <span class="op">&lt;-</span> <span class="fu">constructNWISURL</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">site_id</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"01075"</span>, <span class="st">"00029"</span>, <span class="st">"00453"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">startDate</span>, <span class="va">endDate</span>, <span class="st">"qw"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">url_daily_tsv</span> <span class="op">&lt;-</span> <span class="fu">constructNWISURL</span><span class="op">(</span><span class="va">site_id</span>, <span class="va">pCode</span>, <span class="va">startDate</span>, <span class="va">endDate</span>, <span class="st">"dv"</span>,</span></span>
<span class="r-in"><span>  statCd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"00003"</span>, <span class="st">"00001"</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"tsv"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">url_rating</span> <span class="op">&lt;-</span> <span class="fu">constructNWISURL</span><span class="op">(</span><span class="va">site_id</span>, service <span class="op">=</span> <span class="st">"rating"</span>, ratingType <span class="op">=</span> <span class="st">"base"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">url_peak</span> <span class="op">&lt;-</span> <span class="fu">constructNWISURL</span><span class="op">(</span><span class="va">site_id</span>, service <span class="op">=</span> <span class="st">"peak"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">url_meas</span> <span class="op">&lt;-</span> <span class="fu">constructNWISURL</span><span class="op">(</span><span class="va">site_id</span>, service <span class="op">=</span> <span class="st">"meas"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">urlQW</span> <span class="op">&lt;-</span> <span class="fu">constructNWISURL</span><span class="op">(</span><span class="st">"450456092225801"</span>, <span class="st">"70300"</span>,</span></span>
<span class="r-in"><span>  startDate <span class="op">=</span> <span class="st">""</span>, endDate <span class="op">=</span> <span class="st">""</span>,</span></span>
<span class="r-in"><span>  <span class="st">"qw"</span>, expanded <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer></footer></div> <!-- / div for your main content-->

<!-- BEGIN USGS Footer Template -->

<footer class="footer"><div class="tmp-container">
		<!-- .footer-wrap -->
			<!-- .footer-doi -->
			<div class="footer-doi">
				<!-- footer nav links -->
				<ul class="menu nav"><li class="first leaf menu-links menu-level-1"><a href="https://www.doi.gov/privacy" class="external-link">DOI Privacy Policy</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/policies-and-notices" class="external-link">Legal</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/accessibility-and-us-geological-survey" class="external-link">Accessibility</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/sitemap" class="external-link">Site Map</a></li>
					<li class="last leaf menu-links menu-level-1"><a href="https://answers.usgs.gov/" class="external-link">Contact USGS</a></li>
				</ul><!--/ footer nav links --></div>
			<!-- /.footer-doi -->

			<hr><!-- .footer-utl-links --><div class="footer-doi">
			<ul class="menu nav"><li class="first leaf menu-links menu-level-1"><a href="https://www.doi.gov/" class="external-link">U.S. Department of the Interior</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.doioig.gov/" class="external-link">DOI Inspector General</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.whitehouse.gov/" class="external-link">White House</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.whitehouse.gov/omb/management/egov/" class="external-link">E-gov</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.doi.gov/pmb/eeo/no-fear-act" class="external-link">No Fear Act</a></li>
				<li class="last leaf menu-links menu-level-1"><a href="https://www.usgs.gov/about/organization/science-support/foia" class="external-link">FOIA</a></li>
			</ul></div>			
		<!-- /.footer-utl-links -->
		<!-- .footer-social-links -->
		<div class="footer-social-links">
			<ul class="social"><li class="follow">Follow</li>
				<li class="twitter">
					<a href="https://twitter.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-twitter-square"><span class="only">Twitter</span></i>
					</a>
				</li>
				<li class="facebook">
					<a href="https://facebook.com/usgeologicalsurvey" target="_blank" class="external-link">
						<i class="fa fa-facebook-square"><span class="only">Facebook</span></i>
					</a>
				</li>
				<li class="github">
					<a href="https://github.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-github"><span class="only">GitHub</span></i>
					</a>
				</li>
				<li class="flickr">
					<a href="https://flickr.com/usgeologicalsurvey" target="_blank" class="external-link">
						<i class="fa fa-flickr"><span class="only">Flickr</span></i>
					</a>
				</li>
				<li class="youtube">
					<a href="http://youtube.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-youtube-play"><span class="only">YouTube</span></i>
					</a>
				</li>
				<li class="instagram">
					<a href="https://instagram.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-instagram"><span class="only">Instagram</span></i>
					</a>
				</li>
			</ul></div>
		<!-- /.footer-social-links -->
	</div>
		<!-- /.footer-wrap -->	
</footer><!-- END USGS Footer Template- --><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKQR8KP" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  
  </body><!-- closing div for body --></html>

