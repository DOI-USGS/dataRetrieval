<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dataRetrieval">
<title>Changes to NWIS QW services • dataRetrieval</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Changes to NWIS QW services">
<meta property="og:description" content="dataRetrieval">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-53797708-7"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-53797708-7');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://www.usgs.gov/" class="external-link"><img src="logo.png" id="logo" alt="Home" style="padding: 0px 50px 0px 0px;"></a>
    <a class="navbar-brand me-2" href="../index.html">dataRetrieval</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.7.12</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/dataRetrieval.html">Background</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Function Help</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-large-data-pull-examples">Large Data Pull Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-large-data-pull-examples">
    <a class="dropdown-item" href="../articles/wqp_large_pull_script.html">Scripting Approach</a>
    <a class="dropdown-item" href="../articles/wqp_large_pull_targets.html">Pipeline Approach</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/tutorial.html">Tutorial</a>
    <a class="dropdown-item" href="../articles/qwdata_changes.html">Changes to QW</a>
    <a class="dropdown-item" href="../articles/movingAverages.html">Moving Averages</a>
    <a class="dropdown-item" href="../articles/statsServiceMap.html">Stat Service</a>
    <a class="dropdown-item" href="../articles/nldi.html">NLDI Interface</a>
    <a class="dropdown-item" href="../articles/Contributing.html">How to Contribute</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/DOI-USGS/dataRetrieval">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changes to NWIS QW services</h1>
                        <h4 data-toc-skip class="author">Laura A.
DeCicco</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DOI-USGS/dataRetrieval/blob/HEAD/vignettes/qwdata_changes.Rmd" class="external-link"><code>vignettes/qwdata_changes.Rmd</code></a></small>
      <div class="d-none name"><code>qwdata_changes.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="changes-to-water-quality-services">Changes to water quality services<a class="anchor" aria-label="anchor" href="#changes-to-water-quality-services"></a>
</h2>
<p>There was a recent announcement that the NWIS discrete water quality
web services will be shut down in fall of 2023 (continuous water quality
data will continue to be made available via NWIS functions). What does
this mean for <code>dataRetrieval</code> users? The water quality data
will continue to be available, but it must be accessed from the <a href="https://www.waterqualitydata.us/" class="external-link">Water Quality Portal</a> rather
than the NWIS services. There are 3 major <code>dataRetrieval</code>
functions that will be affected: <code>readNWISqw</code>,
<code>whatNWISdata</code>, and <code>readNWISdata</code>. This vignette
will describe the most common workflows conversions needed to update
existing scripts.</p>
<p>This vignette is being provided well in advance of any breaking
changes, and more information and guidance will be provided. If you need
more help than is provided here, please reach out to <a href="mailto:gs-w-IOW_PO_team@usgs.gov" class="email">gs-w-IOW_PO_team@usgs.gov</a></p>
<div class="section level3">
<h3 id="readnwisqw">
<code>readNWISqw</code><a class="anchor" aria-label="anchor" href="#readnwisqw"></a>
</h3>
<p>Starting with version 2.7.9, users will notice a Warning message when
using this function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">site_ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"04024430"</span>, <span class="st">"04024000"</span><span class="op">)</span></span>
<span><span class="va">parameterCd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"34247"</span>, <span class="st">"30234"</span>, <span class="st">"32104"</span>, <span class="st">"34220"</span><span class="op">)</span></span>
<span><span class="va">nwisData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readNWISqw.html">readNWISqw</a></span><span class="op">(</span><span class="va">site_ids</span>, <span class="va">parameterCd</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning message:                                                                                               
NWIS qw web services are being retired. Please see the vignette 
'Changes to NWIS QW services' for more information. </code></pre>
<p>Please don’t ignore this warning, the function will eventually be
<em>removed</em> from the <code>dataRetrieval</code> package.</p>
<p>So…what do you do instead? The function you will need to move to is
<code>readWQPqw</code>. First, you’ll need to convert the USGS site ID’s
into something that the Water Quality Portal will accept. Luckily,
that’s a single line pasting a prefix “USGS-”. Here’s an example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wqpData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readWQPqw.html">readWQPqw</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"USGS-"</span>, <span class="va">site_ids</span><span class="op">)</span>, <span class="va">parameterCd</span><span class="op">)</span></span></code></pre></div>
<p>Let’s compare the number of rows, number of columns, and attributes
to each return:</p>
<table class="table table">
<tr>
<th>
NWIS
</th>
<th>
WQP
</th>
</tr>
<tr></tr>
<tr>
<td>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">nwisData</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 208</span></span></code></pre>
</td>
<td>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">wqpData</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 208</span></span></code></pre>
</td>
</tr>
<tr>
<td>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">nwisData</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 36</span></span></code></pre>
</td>
<td>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">wqpData</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 65</span></span></code></pre>
</td>
</tr>
<tr>
<td>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">nwisData</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "names"        "class"        "row.names"    "queryTime"    "url"         </span></span>
<span><span class="co">##  [6] "headerInfo"   "comment"      "siteInfo"     "variableInfo" "header"</span></span></code></pre>
</td>
<td>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">wqpData</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "names"        "class"        "row.names"    "siteInfo"     "variableInfo"</span></span>
<span><span class="co">## [6] "url"          "queryTime"</span></span></code></pre>
</td>
</tr>
</table>
<p>The same number of rows are returned (because at it’s core, it IS the
same data), more columns in the Water Quality Portal output, and
slightly different attributes. You can explore the differences of those
attributes:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">site_NWIS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">nwisData</span>, <span class="st">"siteInfo"</span><span class="op">)</span></span>
<span><span class="va">site_WQP</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">wqpData</span>, <span class="st">"siteInfo"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">param_NWIS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">nwisData</span>, <span class="st">"variableInfo"</span><span class="op">)</span></span>
<span><span class="va">param_WQP</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">wqpData</span>, <span class="st">"variableInfo"</span><span class="op">)</span></span></code></pre></div>
<p>The next big task is figuring out which columns from the WQP output
map to the original columns from the NWIS output. The vast majority of
workflows will not need to completely re-engineer the WQP output back
into the NWIS format. Instead, look at your workflow and determine what
columns from the original NWIS output are needed to preserve the
integrity of the workflow.</p>
<p>Let’s use the <code>dplyr</code> package to pull out the columns are
used in this example workflow, and make sure both NWIS and WQP are
ordered in the same way.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">nwisData_relavent</span> <span class="op">&lt;-</span> <span class="va">nwisData</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">site_no</span>, <span class="va">startDateTime</span>, <span class="va">parm_cd</span>,</span>
<span>    <span class="va">hyd_cond_cd</span>, <span class="va">remark_cd</span>, <span class="va">result_va</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">startDateTime</span>, <span class="va">parm_cd</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nwisData_relavent</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="28%">
<col width="11%">
<col width="17%">
<col width="14%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left">site_no</th>
<th align="left">startDateTime</th>
<th align="left">parm_cd</th>
<th align="left">hyd_cond_cd</th>
<th align="left">remark_cd</th>
<th align="right">result_va</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">30234</td>
<td align="left">9</td>
<td align="left">&lt;</td>
<td align="right">0.16</td>
</tr>
<tr class="even">
<td align="left">04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">32104</td>
<td align="left">9</td>
<td align="left">&lt;</td>
<td align="right">0.16</td>
</tr>
<tr class="odd">
<td align="left">04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">34220</td>
<td align="left">9</td>
<td align="left">&lt;</td>
<td align="right">0.02</td>
</tr>
<tr class="even">
<td align="left">04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">34247</td>
<td align="left">9</td>
<td align="left">&lt;</td>
<td align="right">0.02</td>
</tr>
<tr class="odd">
<td align="left">04024000</td>
<td align="left">2011-04-20 15:00:00</td>
<td align="left">30234</td>
<td align="left">5</td>
<td align="left">&lt;</td>
<td align="right">0.16</td>
</tr>
<tr class="even">
<td align="left">04024000</td>
<td align="left">2011-04-20 15:00:00</td>
<td align="left">32104</td>
<td align="left">5</td>
<td align="left">&lt;</td>
<td align="right">0.16</td>
</tr>
</tbody>
</table>
<p>If we explore the output from WQP, we can try to find the columns
that include the same relavent information:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wqpData_relavent</span> <span class="op">&lt;-</span> <span class="va">wqpData</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    site_no <span class="op">=</span> <span class="va">MonitoringLocationIdentifier</span>,</span>
<span>    startDateTime <span class="op">=</span> <span class="va">ActivityStartDateTime</span>,</span>
<span>    parm_cd <span class="op">=</span> <span class="va">USGSPCode</span>,</span>
<span>    hyd_cond_cd <span class="op">=</span> <span class="va">HydrologicCondition</span>,</span>
<span>    remark_cd <span class="op">=</span> <span class="va">ResultDetectionConditionText</span>,</span>
<span>    result_va <span class="op">=</span> <span class="va">ResultMeasureValue</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">startDateTime</span>, <span class="va">parm_cd</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">wqpData_relavent</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="16%">
<col width="23%">
<col width="9%">
<col width="24%">
<col width="15%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">site_no</th>
<th align="left">startDateTime</th>
<th align="left">parm_cd</th>
<th align="left">hyd_cond_cd</th>
<th align="left">remark_cd</th>
<th align="right">result_va</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">USGS-04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">30234</td>
<td align="left">Stable, normal stage</td>
<td align="left">Not Detected</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">USGS-04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">32104</td>
<td align="left">Stable, normal stage</td>
<td align="left">Not Detected</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">USGS-04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">34220</td>
<td align="left">Stable, normal stage</td>
<td align="left">Not Detected</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">USGS-04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">34247</td>
<td align="left">Stable, normal stage</td>
<td align="left">Not Detected</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">USGS-04024000</td>
<td align="left">2011-04-20 15:00:00</td>
<td align="left">30234</td>
<td align="left">Falling stage</td>
<td align="left">Not Detected</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">USGS-04024000</td>
<td align="left">2011-04-20 15:00:00</td>
<td align="left">32104</td>
<td align="left">Falling stage</td>
<td align="left">Not Detected</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>Now we can start looking at the results and trying to decide how
future workflows should be setup. Here are some decisions for this
example that we can consider:</p>
<div class="section level4">
<h4 id="censored-values">Censored values<a class="anchor" aria-label="anchor" href="#censored-values"></a>
</h4>
<p>The result_va in the NWIS service came back with a value. However,
the data is actually censored, meaning we only know it’s below the
detection limit. With some lazier coding, it might have been really easy
to not realize these values are left-censored. So, while we could
substitute the detection levels into the measured values if there’s an
<code>NA</code> in the measured value, this might be a great time to
update your workflow to handle censored values more robustly. We are
probably interested in maintaining the detection level in another
column.</p>
<p>For this theoretical workflow, let’s think about what we are trying
to find out. Let’s say that we want to know if a value is
“left-censored” or not. Maybe in this case, what would make the most
sense is to have a column that is a logical TRUE/FALSE. For this
example, there was only the text “Not Detected” in the
“ResultDetectionConditionText” column PLEASE NOTE that other data may
include different messages about detection conditions, you will need to
examine your data carefully. Here’s an example from the
<code>EGRET</code> package on how to decide if a
“ResultDetectionConditionText” should be considered a censored
value:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">censored_text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Not Detected"</span>,</span>
<span>  <span class="st">"Non-Detect"</span>,</span>
<span>  <span class="st">"Non Detect"</span>,</span>
<span>  <span class="st">"Detected Not Quantified"</span>,</span>
<span>  <span class="st">"Below Quantification Limit"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">wqpData_relavent</span> <span class="op">&lt;-</span> <span class="va">wqpData</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>left_censored <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">censored_text</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span>,</span>
<span>    <span class="va">ResultDetectionConditionText</span>,</span>
<span>    ignore.case <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    site_no <span class="op">=</span> <span class="va">MonitoringLocationIdentifier</span>,</span>
<span>    startDateTime <span class="op">=</span> <span class="va">ActivityStartDateTime</span>,</span>
<span>    parm_cd <span class="op">=</span> <span class="va">USGSPCode</span>,</span>
<span>    <span class="va">left_censored</span>,</span>
<span>    result_va <span class="op">=</span> <span class="va">ResultMeasureValue</span>,</span>
<span>    detection_level <span class="op">=</span> <span class="va">DetectionQuantitationLimitMeasure.MeasureValue</span>,</span>
<span>    dl_units <span class="op">=</span> <span class="va">DetectionQuantitationLimitMeasure.MeasureUnitCode</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">startDateTime</span>, <span class="va">parm_cd</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">wqpData_relavent</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="15%">
<col width="21%">
<col width="8%">
<col width="15%">
<col width="10%">
<col width="17%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">site_no</th>
<th align="left">startDateTime</th>
<th align="left">parm_cd</th>
<th align="left">left_censored</th>
<th align="right">result_va</th>
<th align="right">detection_level</th>
<th align="left">dl_units</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">USGS-04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">30234</td>
<td align="left">TRUE</td>
<td align="right">NA</td>
<td align="right">0.16</td>
<td align="left">ug/l</td>
</tr>
<tr class="even">
<td align="left">USGS-04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">32104</td>
<td align="left">TRUE</td>
<td align="right">NA</td>
<td align="right">0.16</td>
<td align="left">ug/l</td>
</tr>
<tr class="odd">
<td align="left">USGS-04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">34220</td>
<td align="left">TRUE</td>
<td align="right">NA</td>
<td align="right">0.02</td>
<td align="left">ug/l</td>
</tr>
<tr class="even">
<td align="left">USGS-04024000</td>
<td align="left">2011-03-15 15:35:00</td>
<td align="left">34247</td>
<td align="left">TRUE</td>
<td align="right">NA</td>
<td align="right">0.02</td>
<td align="left">ug/l</td>
</tr>
<tr class="odd">
<td align="left">USGS-04024000</td>
<td align="left">2011-04-20 15:00:00</td>
<td align="left">30234</td>
<td align="left">TRUE</td>
<td align="right">NA</td>
<td align="right">0.16</td>
<td align="left">ug/l</td>
</tr>
<tr class="even">
<td align="left">USGS-04024000</td>
<td align="left">2011-04-20 15:00:00</td>
<td align="left">32104</td>
<td align="left">TRUE</td>
<td align="right">NA</td>
<td align="right">0.16</td>
<td align="left">ug/l</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="nwis-codes">NWIS codes<a class="anchor" aria-label="anchor" href="#nwis-codes"></a>
</h4>
<p>Another difference that is going to require some thoughtful decisions
is how to interpret additional NWIS codes. They will now be descriptive
text. Columns such as hyd_cond_cd, samp_type_cd, hyd_event_cd, medium_cd
will now all be reported with descriptive words rather than single
letters or numbers. It will be the responsibility of the user to
consider the best way to deal with these changes.</p>
<p>To take full advantage of the Water Quality Portal, it would be a
good idea to begin to move away from USGS parameter codes. While USGS
data includes a parameter code, there are many other water quality data
sources within the Water Quality Portal. To compare USGS and non-USGS
data, you’ll need to compare data that has at least the same
characteristic name and measured units. There are many other fields that
may be required to assure you are comparing apples-to-apples. For
example, “ResultSampleFractionText” is important in many measured
parameters.</p>
<p>The measurement units are found in EITHER the
“ResultMeasure.MeasureUnitCode” column, OR the
“DetectionQuantitationLimitMeasure.MeasureUnitCode” column, depending on
if the individual measurement is censored or not.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wqpData_relavent_codes</span> <span class="op">&lt;-</span> <span class="va">wqpData</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">ResultMeasure.MeasureUnitCode</span><span class="op">)</span>,</span>
<span>    <span class="va">DetectionQuantitationLimitMeasure.MeasureUnitCode</span>,</span>
<span>    <span class="va">ResultMeasure.MeasureUnitCode</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    parm_cd <span class="op">=</span> <span class="va">USGSPCode</span>,</span>
<span>    <span class="va">CharacteristicName</span>, <span class="va">ResultSampleFractionText</span>,</span>
<span>    <span class="va">units</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">wqpData_relavent_codes</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">parm_cd</th>
<th align="left">CharacteristicName</th>
<th align="left">ResultSampleFractionText</th>
<th align="left">units</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">30234</td>
<td align="left">Bromacil</td>
<td align="left">Recoverable</td>
<td align="left">ug/l</td>
</tr>
<tr class="even">
<td align="left">32104</td>
<td align="left">Tribromomethane</td>
<td align="left">Recoverable</td>
<td align="left">ug/l</td>
</tr>
<tr class="odd">
<td align="left">34220</td>
<td align="left">Anthracene</td>
<td align="left">Recoverable</td>
<td align="left">ug/l</td>
</tr>
<tr class="even">
<td align="left">34247</td>
<td align="left">Benzo[a]pyrene</td>
<td align="left">Recoverable</td>
<td align="left">ug/l</td>
</tr>
</tbody>
</table>
<p>If there are USGS codes that you are using in your analysis, begin to
move away from those codes, and move to the text. In the data we are
looking at here:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wqpData_with_codes</span> <span class="op">&lt;-</span> <span class="va">wqpData</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">HydrologicCondition</span>, <span class="va">HydrologicEvent</span>,</span>
<span>    <span class="va">ActivityTypeCode</span>, <span class="va">ActivityMediaName</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">wqpData_with_codes</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="29%">
<col width="22%">
<col width="23%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="left">HydrologicCondition</th>
<th align="left">HydrologicEvent</th>
<th align="left">ActivityTypeCode</th>
<th align="left">ActivityMediaName</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Stable, low stage</td>
<td align="left">Routine sample</td>
<td align="left">Sample-Routine</td>
<td align="left">Water</td>
</tr>
<tr class="even">
<td align="left">Rising stage</td>
<td align="left">Storm</td>
<td align="left">Sample-Routine</td>
<td align="left">Water</td>
</tr>
<tr class="odd">
<td align="left">Stable, normal stage</td>
<td align="left">Routine sample</td>
<td align="left">Sample-Routine</td>
<td align="left">Water</td>
</tr>
<tr class="even">
<td align="left">Falling stage</td>
<td align="left">Routine sample</td>
<td align="left">Sample-Routine</td>
<td align="left">Water</td>
</tr>
<tr class="odd">
<td align="left">Stable, normal stage</td>
<td align="left">Under ice cover</td>
<td align="left">Sample-Routine</td>
<td align="left">Water</td>
</tr>
<tr class="even">
<td align="left">Stable, normal stage</td>
<td align="left">Spring breakup</td>
<td align="left">Sample-Routine</td>
<td align="left">Water</td>
</tr>
</tbody>
</table>
<p>To convert the codes found in this example:</p>
<table class="table">
<thead><tr class="header">
<th align="left">NWIS</th>
<th align="left">WQP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">samp_type_cd = 9</td>
<td align="left">ActivityTypeCode = ‘Sample-Routine’</td>
</tr>
<tr class="even">
<td align="left">hyd_cond_cd = 9</td>
<td align="left">HydrologicCondition = ‘Stable, normal stage’</td>
</tr>
<tr class="odd">
<td align="left">hyd_cond_cd = 5</td>
<td align="left">HydrologicCondition = ‘Falling stage’</td>
</tr>
<tr class="even">
<td align="left">hyd_cond_cd = 8</td>
<td align="left">HydrologicCondition = ‘Rising stage’</td>
</tr>
<tr class="odd">
<td align="left">medium_cd = ‘WS’</td>
<td align="left">ActivityMediaName = ‘Water’</td>
</tr>
<tr class="even">
<td align="left">hyd_event_cd = ‘B’</td>
<td align="left">HydrologicEvent = ‘Under ice cover’</td>
</tr>
<tr class="odd">
<td align="left">hyd_event_cd = ‘A’</td>
<td align="left">HydrologicEvent = ‘Spring breakup’</td>
</tr>
<tr class="even">
<td align="left">hyd_event_cd = 9</td>
<td align="left">HydrologicEvent = ‘Routine sample’</td>
</tr>
</tbody>
</table>
<p>If you use the <code>readNWISqw</code> function, you WILL need to
adjust your workflows, and you may find there are more codes you will
need to account for. Hopefully this section helped get you started. It
does not include every scenario, so you may find more columns or codes
or other conditions you need to account for.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="whatnwisdata">whatNWISdata<a class="anchor" aria-label="anchor" href="#whatnwisdata"></a>
</h2>
<p>This function will continue to work for any service except “qw”
(water quality discrete data). “qw” results will no longer be returned.
This function is used to discover what water quality data is
available.</p>
<p>The function to replace this functionality is
<code>whatWQPdata</code>:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">whatNWIS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/whatNWISdata.html">whatNWISdata</a></span><span class="op">(</span></span>
<span>  siteNumber <span class="op">=</span> <span class="va">site_ids</span>,</span>
<span>  service <span class="op">=</span> <span class="st">"qw"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning message:                                                                                               
NWIS qw web services are being retired. Please see the vignette 
'Changes to NWIS QW services' for more information.</code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">whatWQP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/whatWQPdata.html">whatWQPdata</a></span><span class="op">(</span>siteNumber <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"USGS-"</span>, <span class="va">site_ids</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>There are some major differences in the output. The NWIS services
offers back one row per site/parameter code to learn how many samples
are available. This is not <em>currently</em> available from the Water
Quality Portal, however there are new summary services being developed.
When those become available, we will include new documentation on how to
get this information.</p>
</div>
<div class="section level2">
<h2 id="readnwisdata">readNWISdata<a class="anchor" aria-label="anchor" href="#readnwisdata"></a>
</h2>
<p>If you get your water quality data from the <code>readNWISdata</code>
function, you will receive a warning. Note, this is <em>only</em> for
the “qwdata” service. All other web services are not being deprecated,
and should receive no warning.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qwData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readNWISdata.html">readNWISdata</a></span><span class="op">(</span></span>
<span>  state_cd <span class="op">=</span> <span class="st">"WI"</span>,</span>
<span>  startDate <span class="op">=</span> <span class="st">"2000-01-01"</span>,</span>
<span>  drain_area_va_min <span class="op">=</span> <span class="fl">50</span>, qw_count_nu <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  qw_attributes <span class="op">=</span> <span class="st">"expanded"</span>,</span>
<span>  qw_sample_wide <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  list_of_search_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"state_cd"</span>,</span>
<span>    <span class="st">"drain_area_va"</span>,</span>
<span>    <span class="st">"obs_count_nu"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  service <span class="op">=</span> <span class="st">"qw"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning message:
NWIS qw web services are being retired. Please see the vignette 
'Changes to NWIS QW services' for more information. </code></pre>
<p>This is not an especially common <code>dataRetrieval</code> workflow,
so there are not a lot of details here. Please reach out if more
information is needed to update your workflows.</p>
<p>See <code><a href="../reference/readWQPdata.html">?readWQPdata</a></code> to see all the ways to query data in
the Water Quality Portal. Use the suggestions above to convert the
output of the <code>readWQPdata</code> function to convert the WQP
output to what is important for your workflow.</p>
</div>
<div class="section level2">
<h2 id="how-to-find-more-help">How to find more help<a class="anchor" aria-label="anchor" href="#how-to-find-more-help"></a>
</h2>
<p>These changes are big, and initially sound overwhelming. But in the
end, they are thoughtful changes that will make understanding USGS water
data more intuitive. Please reach out for questions and comments to: <a href="mailto:gs-w-IOW_PO_team@usgs.gov" class="email">gs-w-IOW_PO_team@usgs.gov</a></p>
</div>
<div class="section level2">
<h2 id="disclaimer">Disclaimer<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h2>
<p>This information is preliminary and is subject to revision. It is
being provided to meet the need for timely best science. The information
is provided on the condition that neither the U.S. Geological Survey nor
the U.S. Government may be held liable for any damages resulting from
the authorized or unauthorized use of the information.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer></footer>
</div> <!-- / div for your main content-->

<!-- BEGIN USGS Footer Template -->

<footer class="footer"><div class="tmp-container">
		<!-- .footer-wrap -->
			<!-- .footer-doi -->
			<div class="footer-doi">
				<!-- footer nav links -->
				<ul class="menu nav">
<li class="first leaf menu-links menu-level-1"><a href="https://www.doi.gov/privacy" class="external-link">DOI Privacy Policy</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/policies-and-notices" class="external-link">Legal</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/accessibility-and-us-geological-survey" class="external-link">Accessibility</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/sitemap" class="external-link">Site Map</a></li>
					<li class="last leaf menu-links menu-level-1"><a href="https://answers.usgs.gov/" class="external-link">Contact USGS</a></li>
				</ul>
<!--/ footer nav links -->
</div>
			<!-- /.footer-doi -->

			<hr>
<!-- .footer-utl-links --><div class="footer-doi">
			<ul class="menu nav">
<li class="first leaf menu-links menu-level-1"><a href="https://www.doi.gov/" class="external-link">U.S. Department of the Interior</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.doioig.gov/" class="external-link">DOI Inspector General</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.whitehouse.gov/" class="external-link">White House</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.whitehouse.gov/omb/management/egov/" class="external-link">E-gov</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.doi.gov/pmb/eeo/no-fear-act" class="external-link">No Fear Act</a></li>
				<li class="last leaf menu-links menu-level-1"><a href="https://www.usgs.gov/about/organization/science-support/foia" class="external-link">FOIA</a></li>
			</ul>
</div>			
		<!-- /.footer-utl-links -->
		<!-- .footer-social-links -->
		<div class="footer-social-links">
			<ul class="social">
<li class="follow">Follow</li>
				<li class="twitter">
					<a href="https://twitter.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-twitter-square"><span class="only">Twitter</span></i>
					</a>
				</li>
				<li class="facebook">
					<a href="https://facebook.com/usgeologicalsurvey" target="_blank" class="external-link">
						<i class="fa fa-facebook-square"><span class="only">Facebook</span></i>
					</a>
				</li>
				<li class="github">
					<a href="https://github.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-github"><span class="only">GitHub</span></i>
					</a>
				</li>
				<li class="flickr">
					<a href="https://flickr.com/usgeologicalsurvey" target="_blank" class="external-link">
						<i class="fa fa-flickr"><span class="only">Flickr</span></i>
					</a>
				</li>
				<li class="youtube">
					<a href="http://youtube.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-youtube-play"><span class="only">YouTube</span></i>
					</a>
				</li>
				<li class="instagram">
					<a href="https://instagram.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-instagram"><span class="only">Instagram</span></i>
					</a>
				</li>
			</ul>
</div>
		<!-- /.footer-social-links -->
	</div>
		<!-- /.footer-wrap -->	
</footer><!-- END USGS Footer Template- --><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKQR8KP" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  
  </body>
<!-- closing div for body -->
</html>
